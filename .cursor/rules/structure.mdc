---
description: 
globs: 
alwaysApply: false
---
# Project Structure

```
.
├── .cursor
│   └── rules
│       ├── agent.mdc
│       ├── structure.mdc
│       └── superform-solidity-rules.mdc
├── .env.example
├── .github
│   ├── CODEOWNERS
│   └── workflows
│       └── contracts-ci.yml
├── .gitignore
├── .gitmodules
├── .prettierignore
├── .prettierrc.yml
├── .solhint.json
├── Makefile
├── README.md
├── contract_bindings
│   ├── AcrossSendFundsAndExecuteOnDstHook.go
│   ├── IAcrossV3Receiver.go
│   ├── PeripheryRegistry.go
│   ├── SuperDestinationExecutor.go
│   ├── SuperExecutor.go
│   ├── SuperMerkleValidator.go
│   ├── SuperNativePaymaster.go
│   └── SuperRegistry.go
├── documentation
│   └── original-instructions.md
├── foundry.toml
├── go.mod
├── go.sum
├── lib
│   ├── ExcessivelySafeCall
│   ├── forge-std
│   ├── modulekit
│   ├── openzeppelin-contracts
│   ├── pendle-core-v2-public
│   ├── pigeon
│   ├── solady
│   ├── solidity-stringutils
│   └── surl
├── script
│   ├── DeployV2.s.sol
│   ├── output
│   │   ├── latest.json
│   │   └── local
│   │       ├── 1
│   │       │   └── Ethereum-latest.json
│   │       ├── 10
│   │       │   └── Optimism-latest.json
│   │       ├── 8453
│   │       │   └── Base-latest.json
│   │       └── latest.json
│   ├── run
│   │   ├── deploy_v2_testnet.sh
│   │   ├── deploy_v2_vnet_s3.sh
│   │   ├── export_abis_s3.sh
│   │   ├── generate-contract-bindings.sh
│   │   ├── retrieve-abis.sh
│   │   ├── tenderly
│   │   │   └── index.js
│   │   ├── update_structure.sh
│   │   └── verify_v2_vnet.sh
│   └── utils
│       ├── Configuration.sol
│       ├── Constants.sol
│       ├── ISuperDeployer.sol
│       └── SuperDeployer.sol
├── src
│   ├── core
│   │   ├── accounting
│   │   │   ├── BaseLedger.sol
│   │   │   ├── ERC5115Ledger.sol
│   │   │   ├── FlatFeeLedger.sol
│   │   │   ├── SuperLedger.sol
│   │   │   ├── SuperLedgerConfiguration.sol
│   │   │   └── oracles
│   │   │       ├── AbstractYieldSourceOracle.sol
│   │   │       ├── ERC4626YieldSourceOracle.sol
│   │   │       ├── ERC5115YieldSourceOracle.sol
│   │   │       ├── ERC7540YieldSourceOracle.sol
│   │   │       ├── PendlePtYieldSourceOracle.sol
│   │   │       ├── SpectraPTYieldSourceOracle.sol
│   │   │       └── StakingYieldSourceOracle.sol
│   │   ├── adapters
│   │   │   ├── AcrossV3Adapter.sol
│   │   │   └── DebridgeAdapter.sol
│   │   ├── executors
│   │   │   ├── SuperDestinationExecutor.sol
│   │   │   ├── SuperExecutor.sol
│   │   │   └── SuperExecutorBase.sol
│   │   ├── hooks
│   │   │   ├── BaseHook.sol
│   │   │   ├── bridges
│   │   │   │   ├── across
│   │   │   │   │   └── AcrossSendFundsAndExecuteOnDstHook.sol
│   │   │   │   └── debridge
│   │   │   │       └── DeBridgeSendOrderAndExecuteOnDstHook.sol
│   │   │   ├── claim
│   │   │   │   ├── BaseClaimRewardHook.sol
│   │   │   │   ├── fluid
│   │   │   │   │   └── FluidClaimRewardHook.sol
│   │   │   │   ├── gearbox
│   │   │   │   │   └── GearboxClaimRewardHook.sol
│   │   │   │   └── yearn
│   │   │   │       └── YearnClaimOneRewardHook.sol
│   │   │   ├── loan
│   │   │   │   ├── BaseLoanHook.sol
│   │   │   │   └── morpho
│   │   │   │       ├── BaseMorphoLoanHook.sol
│   │   │   │       ├── MorphoSupplyAndBorrowHook.sol
│   │   │   │       ├── MorphoRepayAndWithdrawHook.sol
│   │   │   │       └── MorphoRepayHook.sol
│   │   │   ├── stake
│   │   │   │   ├── fluid
│   │   │   │   │   ├── ApproveAndFluidStakeHook.sol
│   │   │   │   │   ├── FluidStakeHook.sol
│   │   │   │   │   └── FluidUnstakeHook.sol
│   │   │   │   └── gearbox
│   │   │   │       ├── ApproveAndGearboxStakeHook.sol
│   │   │   │       ├── GearboxStakeHook.sol
│   │   │   │       └── GearboxUnstakeHook.sol
│   │   │   ├── swappers
│   │   │   │   ├── 1inch
│   │   │   │   │   └── Swap1InchHook.sol
│   │   │   │   ├── odos
│   │   │   │   │   ├── ApproveAndSwapOdosHook.sol
│   │   │   │   │   └── SwapOdosHook.sol
│   │   │   │   ├── pendle
│   │   │   │   │   ├── PendleRouterRedeemHook.sol
│   │   │   │   │   └── PendleRouterSwapHook.sol
│   │   │   │   └── spectra
│   │   │   │       └── SpectraExchangeHook.sol
│   │   │   ├── tokens
│   │   │   │   └── erc20
│   │   │   │       ├── ApproveERC20Hook.sol
│   │   │   │       └── TransferERC20Hook.sol
│   │   │   └── vaults
│   │   │       ├── 4626
│   │   │       │   ├── ApproveAndDeposit4626VaultHook.sol
│   │   │       │   ├── Deposit4626VaultHook.sol
│   │   │       │   └── Redeem4626VaultHook.sol
│   │   │       ├── 5115
│   │   │       │   ├── ApproveAndDeposit5115VaultHook.sol
│   │   │       │   ├── ApproveAndRedeem5115VaultHook.sol
│   │   │       │   ├── Deposit5115VaultHook.sol
│   │   │       │   └── Redeem5115VaultHook.sol
│   │   │       ├── 7540
│   │   │       │   ├── ApproveAndRequestDeposit7540VaultHook.sol
|   |   |       |   ├── ApproveAndRequestRedeem7540VaultHook.sol
│   │   │       │   ├── CancelDepositRequest7540Hook.sol
│   │   │       │   ├── CancelRedeemRequest7540Hook.sol
│   │   │       │   ├── ClaimCancelDepositRequest7540Hook.sol
│   │   │       │   ├── ClaimCancelRedeemRequest7540Hook.sol
│   │   │       │   ├── Deposit7540VaultHook.sol
│   │   │       │   ├── Redeem7540VaultHook.sol
│   │   │       │   ├── RequestDeposit7540VaultHook.sol
│   │   │       │   ├── RequestRedeem7540VaultHook.sol
│   │   │       │   └── Withdraw7540VaultHook.sol
│   │   │       ├── ethena
│   │   │       │   ├── EthenaCooldownSharesHook.sol
│   │   │       │   └── EthenaUnstakeHook.sol
│   │   │       └── super-vault
│   │   │           ├── CancelDepositHook.sol
│   │   │           └── CancelRedeemHook.sol
│   │   ├── interfaces
│   │   │   ├── ISuperDestinationExecutor.sol
│   │   │   ├── ISuperDestinationValidator.sol
│   │   │   ├── ISuperExecutor.sol
│   │   │   ├── ISuperHook.sol
│   │   │   ├── ISuperNativePaymaster.sol
│   │   │   ├── ISuperRegistry.sol
│   │   │   └── accounting
│   │   │       ├── ISuperLedger.sol
│   │   │       ├── ISuperLedgerConfiguration.sol
│   │   │       └── IYieldSourceOracle.sol
│   │   ├── libraries
│   │   │   ├── HookDataDecoder.sol
│   │   │   └── HookSubTypes.sol
│   │   ├── paymaster
│   │   │   └── SuperNativePaymaster.sol
│   │   └── validators
│   │       ├── SuperDestinationValidator.sol
│   │       ├── SuperMerkleValidator.sol
│   │       └── SuperValidatorBase.sol
│   ├── periphery
│   │   ├── BundlerRegistry.sol
│   │   ├── PeripheryRegistry.sol
│   │   ├── SuperVault.sol
│   │   ├── SuperVaultEscrow.sol
│   │   ├── SuperVaultFactory.sol
│   │   ├── SuperVaultStrategy.sol
│   │   ├── interfaces
│   │   │   ├── IBundlerRegistry.sol
│   │   │   ├── IPeripheryRegistry.sol
│   │   │   ├── ISuperOracle.sol
│   │   │   ├── ISuperOracleL2.sol
│   │   │   ├── ISuperVault.sol
│   │   │   ├── ISuperVaultEscrow.sol
│   │   │   ├── ISuperVaultFactory.sol
│   │   │   ├── ISuperVaultStrategy.sol
│   │   │   └── ISuperYieldSourceOracle.sol
│   │   └── oracles
│   │       ├── SuperOracle.sol
│   │       ├── SuperOracleBase.sol
│   │       ├── SuperOracleL2.sol
│   │       └── SuperYieldSourceOracle.sol
│   └── vendor
│       ├── 1inch
│       │   └── I1InchAggregationRouterV6.sol
│       ├── BoringSolidity
│       │   └── BoringERC20.sol
│       ├── BytesLib.sol
│       ├── account-abstraction
│       │   ├── BasePaymaster.sol
│       │   ├── IMinimalEntryPoint.sol
│       │   └── UserOperationLib.sol
│       ├── awesome-oracles
│       │   └── IOracle.sol
│       ├── bridges
│       │   ├── across
│       │   │   ├── IAcrossSpokePoolV3.sol
│       │   │   └── IAcrossV3Receiver.sol
│       │   └── debridge
│       │       ├── IDeBridgeGate.sol
│       │       ├── IDlnSource.sol
│       │       └── IExternalCallExecutor.sol
│       ├── chainlink
│       │   └── AggregatorV3Interface.sol
│       ├── debridge
│       │   └── IDlnDestination.sol
│       ├── ethena
│       │   └── IStakedUSDeCooldown.sol
│       ├── fluid
│       │   └── IFluidLendingStakingRewards.sol
│       ├── gearbox
│       │   └── IGearboxFarmingPool.sol
│       ├── morpho
│       │   ├── IIrm.sol
│       │   ├── IMorpho.sol
│       │   ├── IOracle.sol
│       │   ├── MarketParamsLib.sol
│       │   ├── MathLib.sol
│       │   └── SharesMathLib.sol
│       ├── nexus
│       │   ├── IERC7484.sol
│       │   ├── INexus.sol
│       │   ├── INexusBootstrap.sol
│       │   └── INexusFactory.sol
│       ├── odos
│       │   └── IOdosRouterV2.sol
│       ├── okx
│       │   ├── IOkxSwapRouter.sol
│       │   └── PMMLib.sol
│       ├── pendle
│       │   ├── IPPYLpOracle.sol
│       │   ├── IPendleMarket.sol
│       │   ├── IPendleRouterV4.sol
│       │   └── IStandardizedYield.sol
│       ├── spectra
│       │   ├── IPrincipalToken.sol
│       │   ├── ISpectraPTToken.sol
│       │   ├── ISpectraRouter.sol
│       │   └── SpectraCommands.sol
│       ├── staking
│       │   └── IStakingVault.sol
│       ├── standards
│       │   ├── ERC7540
│       │   │   └── IERC7540Vault.sol
│       │   ├── ERC7575
│       │   │   └── IERC7575.sol
│       │   ├── ERC7741
│       │   │   └── IERC7741.sol
│       │   └── erc4337
│       │       ├── IEntryPoint.sol
│       │       └── IUserOperation.sol
│       ├── uniswap
│       │   └── permit2
│       │       ├── IAllowanceTransfer.sol
│       │       ├── IEIP712.sol
│       │       ├── IPermit2.sol
│       │       ├── IPermit2Batch.sol
│       │       ├── IPermit2Single.sol
│       │       └── ISignatureTransfer.sol
│       ├── vaults
│       │   ├── 5115
│       │   │   └── IERC5115.sol
│       │   └── 7540
│       │       └── IERC7540.sol
│       └── yearn
│           └── IYearnStakingRewardsMulti.sol
└── test
    ├── BaseE2ETest.t.sol
    ├── BaseTest.t.sol
    ├── integration
    │   ├── BridgeToAnotherChainAndCreateNexusAccount.t.sol
    │   ├── BridgeToMultiVaultDepositAndRedeemFlow.t.sol
    │   ├── CrossChainDepositWithSwapSlippage.t.sol
    │   ├── E2EExecution.t.sol
    │   ├── ERC4626DepositRedeemFlow.t.sol
    │   ├── MultiVaultDepositFlow.t.sol
    │   ├── SuperVault
    │   │   ├── BaseSuperVaultTest.t.sol
    │   │   ├── SuperVault.GasReport.t.sol
    │   │   ├── SuperVault.Scenarios.t.sol
    │   │   ├── SuperVault.allocate.t.sol
    │   │   ├── SuperVault.fulfillDepositRequests.t.sol
    │   │   ├── SuperVault.fulfillRedeemRequests.t.sol
    │   │   ├── SuperVault.matchRequests.t.sol
    │   │   ├── SuperVault.stakeClaimFlow.t.sol
    │   │   ├── SuperVault.t.sol
    │   │   ├── SuperVault5115Underlying.t.sol
    │   │   ├── SuperVault7540Underlying.t.sol
    │   │   ├── SuperVaultE2EFlow.t.sol
    │   │   ├── SuperVaultFactory.t.sol
    │   │   ├── SuperVaultLoanDeposit.t.sol
    │   │   └── test-plan.md
    │   ├── accounting
    │   │   ├── Fees.t.sol
    │   │   ├── oracles
    │   │   │   ├── ERC4626YieldSourceOracle.t.sol
    │   │   │   ├── ERC5115YieldSourceOracle.t.sol
    │   │   │   ├── ERC7540YieldSourceOracle.t.sol
    │   │   │   ├── FluidYieldSourceOracleIntegration.t.sol
    │   │   │   └── YearnV3OracleIntegration.t.sol
    │   │   └── price
    │   │       ├── PendlePriceIntegration.t.sol
    │   │       └── YearnV3PriceIntegration.t.sol
    │   ├── odos
    │   │   └── OdosRouterEthSwap.t.sol
    │   ├── pendle
    │   │   └── PendleRouterSwapHook.t.sol
    │   └── spectra
    │       └── SpectraExchangeSwapHook.t.sol
    ├── mocks
    │   ├── ISuperCollectiveVault.sol
    │   ├── ISuperPositions.sol
    │   ├── MaliciousToken.sol
    │   ├── Mock1InchRouter.sol
    │   ├── Mock4626Vault.sol
    │   ├── Mock5115Vault.sol
    │   ├── Mock7540Vault.sol
    │   ├── MockAccountingVault.sol
    │   ├── MockBaseHook.sol
    │   ├── MockERC20.sol
    │   ├── MockEntryPoint.sol
    │   ├── MockExecutorModule.sol
    │   ├── MockFlashloanSVSimulation.sol
    │   ├── MockHook.sol
    │   ├── MockLedger.sol
    │   ├── MockLockVault.sol
    │   ├── MockOdosRouterV2.sol
    │   ├── MockPendleMarket.sol
    │   ├── MockPendleRouter.sol
    │   ├── MockRegistry.sol
    │   ├── MockSignature.sol
    │   ├── MockSpectraRouter.sol
    │   ├── MockStakingProtocol.sol
    │   ├── MockSuperExecutor.sol
    │   ├── MockSuperPositionFactory.sol
    │   ├── MockTargetExecutor.sol
    │   ├── MockValidatorModule.sol
    │   ├── RuggableConvertVault.sol
    │   ├── RuggableVault.sol
    │   ├── SuperCollectiveVault.sol
    │   ├── SuperPositionsMock.sol
    │   ├── VaultMock.sol
    │   ├── centrifuge
    │   │   ├── IGateway.sol
    │   │   ├── IHook.sol
    │   │   ├── IInvestmentManager.sol
    │   │   ├── IMessageHandler.sol
    │   │   ├── IPoolManager.sol
    │   │   ├── IRecoverable.sol
    │   │   ├── IRestrictionManager.sol
    │   │   ├── IRestrictionManagerLike.sol
    │   │   ├── IRoot.sol
    │   │   └── ITranch.sol
    │   ├── sentinel
    │   │   ├── ISentinel.sol
    │   │   └── SuperPositionSentinel.sol
    │   └── unused-hooks
    │       ├── ApproveWithPermit2Hook.sol
    │       ├── FluidStakeWithPermitHook.sol
    │       ├── MockApproveAndSwapOdosHook.sol
    │       ├── MockSwapOdosHook.sol
    │       ├── PermitBatchWithPermit2Hook.sol
    │       ├── PermitWithPermit2Hook.sol
    │       ├── SwapOkxHook.sol
    │       ├── TransferBatchWithPermit2Hook.sol
    │       ├── TransferWithPermit2Hook.sol
    │       └── YearnClaimAllRewardsHook.sol
    ├── unit
    │   ├── Mock
    │   │   ├── CurveTest.t.sol
    │   │   ├── Mock.t.sol
    │   │   ├── Mock.tree
    │   │   ├── OdosParser.t.sol
    │   │   ├── OneInchParser.t.sol
    │   │   ├── SuperPositionsFactory.t.sol
    │   │   └── SuperPositionsFactoryFuzz.t.sol
    │   ├── SuperExecutor
    │   │   ├── SuperExecutor_sameChainFlow.t.sol
    │   │   └── SuperExecutor_sameChainFlow.tree
    │   ├── bundler
    │   │   └── BundlerRegistry.t.sol
    │   ├── executors
    │   │   └── SuperExecutor.t.sol
    │   ├── hooks
    │   │   ├── ApproveAndDeposit5115VaultHook.t.sol
    │   │   ├── ApproveAndRequestDeposit7540Hook.t.sol
    │   │   ├── PeripheryRegistry.t.sol
    │   │   ├── bridges
    │   │   │   └── across
    │   │   │       └── AcrossSendFundsAndExecuteOnDstHook.t.sol
    │   │   ├── claim
    │   │   │   ├── fluid
    │   │   │   │   └── FluidClaimRewardHook.t.sol
    │   │   │   ├── gearbox
    │   │   │   │   └── GearboxClaimRewardHook.t.sol
    │   │   │   └── yearn
    │   │   │       └── YearnClaimRewardHook.t.sol
    │   │   ├── loan
    │   │   │   ├── MorphoSupplyAndBorrowHook.t.sol
    │   │   │   ├── MorphoRepayAndWithdrawHook.t.sol
    │   │   │   └── MorphoRepayHook.t.sol
    │   │   ├── pendle
    │   │   │   ├── PendleRouterRedeemHook.t.sol
    │   │   │   └── PendleRouterSwapHook.t.sol
    │   │   ├── spectra
    │   │   │   └── SpectraExchangeHook.t.sol
    │   │   ├── stake
    │   │   │   ├── fluid
    │   │   │   │   ├── ApproveAndFluidStakeHook.t.sol
    │   │   │   │   ├── FluidStakeHook.t.sol
    │   │   │   │   └── FluidUnstakeHook.t.sol
    │   │   │   └── gearbox
    │   │   │       ├── ApproveAndGearboxStakeHook.t.sol
    │   │   │       ├── GearboxStakeHook.t.sol
    │   │   │       └── GearboxUnstakeHook.t.sol
    │   │   ├── swappers
    │   │   │   ├── 1inch
    │   │   │   │   └── Swap1InchHook.t.sol
    │   │   │   └── odos
    │   │   │       ├── ApproveAndSwapOdosHook.t.sol
    │   │   │       └── SwapOdosHook.t.sol
    │   │   ├── tokens
    │   │   │   └── erc20
    │   │   │       ├── ApproveERC20Hook.t.sol
    │   │   │       └── TransferERC20Hook.t.sol
    │   │   └── vaults
    │   │       ├── 4626
    │   │       │   ├── ApproveAndDeposit4626VaultHook.t.sol
    │   │       │   ├── Deposit4626VaultHook.t.sol
    │   │       │   └── Redeem4626VaultHook.t.sol
    │   │       ├── 5115
    │   │       │   ├── ApproveAndDeposit5115VaultHook.t.sol
    │   │       │   ├── ApproveAndRedeem5115VaultHook.t.sol
    │   │       │   ├── Deposit5115VaultHook.t.sol
    │   │       │   └── Redeem5115VaultHook.t.sol
    │   │       └── 7540
    │   │           ├── ApproveAndRequestDeposit7540VaultHook.t.sol
    │   │           ├── Deposit7540VaultHook.t.sol
    │   │           ├── RequestDeposit7540VaultHook.t.sol
    │   │           ├── RequestRedeem7540VaultHook.t.sol
    │   │           └── Withdraw7540VaultHook.t.sol
    │   ├── oracles
    │   │   └── SuperOracle.t.sol
    │   ├── paymaster
    │   │   └── SuperNativePaymaster.t.sol
    │   └── validators
    │       ├── SuperDestinationValidator.t.sol
    │       ├── SuperMerkleValidator.t.sol
    │       └── SuperMerkleValidator.tree
    └── utils
        ├── Constants.sol
        ├── Helpers.sol
        ├── MerkleTreeHelper.sol
        ├── SignatureHelper.sol
        ├── merkle
        │   ├── helper
        │   │   └── MerkleReader.sol
        │   ├── merkle-js
        │   │   ├── generateMerkleTree.js
        │   │   └── package.json
        │   └── target
        │       ├── input0.json
        │       ├── jsGeneratedRoot0.json
        │       └── jsTreeDump0.json
        └── parsers
            ├── BaseAPIParser.sol
            ├── OdosAPIParser.sol
            └── OneInchAPIParser.sol

137 directories, 358 files
```
